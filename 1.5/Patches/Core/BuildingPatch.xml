<?xml version="1.0" encoding="utf-8"?>
<Patch>
	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="TM_ArcaneCapacitor"]</xpath>
		<value>
			<li Class="LifeLessons.BuildingProficiencyExtension">
				<requirements>
					<li>LLRoM_MagicConstructsI</li>
					<li>LLRoM_RawI</li>
				</requirements>
				<stuffRequirements>
					<li>
						<stuffCategory>Woody</stuffCategory>
						<requirements>
							<li>Carpentry</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Metallic</stuffCategory>
						<requirements>
							<li>Welding</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Stony</stuffCategory>
						<requirements>
							<li>Masonry</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Fabric</stuffCategory>
						<requirements>
							<li>Tailoring</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Leathery</stuffCategory>
						<requirements>
							<li>Leatherworking</li>
						</requirements>
					</li>
				</stuffRequirements>
				<unqualifiedPenalty>
					<statModifiers>
						<li>
							<stat>ConstructionSpeed</stat>
							<applyGlobally>True</applyGlobally>
							<modifier>0.5</modifier>
						</li>
						<li>
							<stat>ConstructSuccessChance</stat>
							<applyGlobally>True</applyGlobally>
							<modifier>0.9</modifier>
						</li>
					</statModifiers>
				</unqualifiedPenalty>
				<hardRequirement>False</hardRequirement>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="TM_DimensionalManaPocket"]</xpath>
		<value>
			<li Class="LifeLessons.BuildingProficiencyExtension">
				<requirements>
					<li>LLRoM_MagicConstructsI</li>
					<li>LLRoM_RawII</li>
				</requirements>
				<stuffRequirements>
					<li>
						<stuffCategory>Woody</stuffCategory>
						<requirements>
							<li>Carpentry</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Metallic</stuffCategory>
						<requirements>
							<li>Welding</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Stony</stuffCategory>
						<requirements>
							<li>Masonry</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Fabric</stuffCategory>
						<requirements>
							<li>Tailoring</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Leathery</stuffCategory>
						<requirements>
							<li>Leatherworking</li>
						</requirements>
					</li>
				</stuffRequirements>
				<hardRequirement>True</hardRequirement>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="TM_Portal"]</xpath>
		<value>
			<li Class="LifeLessons.BuildingProficiencyExtension">
				<requirements>
					<li>LLRoM_MagicConstructsI</li>
					<li>LLRoM_TeleportationII</li>
				</requirements>
				<stuffRequirements>
					<li>
						<stuffCategory>Woody</stuffCategory>
						<requirements>
							<li>Carpentry</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Metallic</stuffCategory>
						<requirements>
							<li>Welding</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Stony</stuffCategory>
						<requirements>
							<li>Masonry</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Fabric</stuffCategory>
						<requirements>
							<li>Tailoring</li>
						</requirements>
					</li>
					<li>
						<stuffCategory>Leathery</stuffCategory>
						<requirements>
							<li>Leatherworking</li>
						</requirements>
					</li>
				</stuffRequirements>
				<hardRequirement>True</hardRequirement>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="TableGemcutting"]</xpath>
		<value>
			<li Class="LifeLessons.BillProficiencyExtension">
				<templateDef>FurnitureC3</templateDef>
				<hardRequirement>False</hardRequirement>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="TableMagicPrinter"]</xpath>
		<value>
			<li Class="LifeLessons.BillProficiencyExtension">
				<templateDef>FurnitureC3</templateDef>
				<hardRequirement>False</hardRequirement>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="TableMagicPrinter"]</xpath>
		<value>
			<li Class="LifeLessons.BillProficiencyExtension">
				<templateDef>FurnitureC4</templateDef>
				<hardRequirement>False</hardRequirement>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="TableMagicCircle"]</xpath>
		<value>
			<li Class="LifeLessons.BuildingProficiencyExtension">
				<requirements>
					<li>LLRoM_ScribIII</li>
				</requirements>
				<unqualifiedPenalty>
					<statModifiers>
						<li>
							<stat>ConstructionSpeed</stat>
							<applyGlobally>True</applyGlobally>
							<modifier>0.3</modifier>
						</li>
						<li>
							<stat>ConstructSuccessChance</stat>
							<applyGlobally>True</applyGlobally>
							<modifier>0.6</modifier>
						</li>
					</statModifiers>
				</unqualifiedPenalty>
				<hardRequirement>False</hardRequirement>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="TableMagicCircle"]</xpath>
		<value>
			<li Class="LLRoM.ClassAutoLearnExtension">
				<failChance>10</failChance>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="TableMagicCircle"]/comps</xpath>
		<value>
			<li Class="CompProperties_Usable">
				<useJob>UseArtifact</useJob>
				<useLabel>Train at {0_label}</useLabel>
			</li>
			<li Class="CompProperties_UseEffect">
				<compClass>LLRoM.CompUseEffect_LearnClass</compClass>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="TableSmallMagicCircle"]</xpath>
		<value>
			<li Class="LifeLessons.BuildingProficiencyExtension">
				<requirements>
					<li>LLRoM_ScribII</li>
				</requirements>
				<unqualifiedPenalty>
					<statModifiers>
						<li>
							<stat>ConstructionSpeed</stat>
							<applyGlobally>True</applyGlobally>
							<modifier>0.5</modifier>
						</li>
						<li>
							<stat>ConstructSuccessChance</stat>
							<applyGlobally>True</applyGlobally>
							<modifier>0.8</modifier>
						</li>
					</statModifiers>
				</unqualifiedPenalty>
				<hardRequirement>False</hardRequirement>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAddModExtension">
		<xpath>Defs/ThingDef[defName="TableSmallMagicCircle"]</xpath>
		<value>
			<li Class="LLRoM.ClassAutoLearnExtension">
				<failChance>30</failChance>
			</li>
		</value>
	</Operation>
	
	<Operation Class="PatchOperationAdd">
		<xpath>Defs/ThingDef[defName="TableSmallMagicCircle"]/comps</xpath>
		<value>
			<li Class="CompProperties_Usable">
				<useJob>UseArtifact</useJob>
				<useLabel>Train at {0_label}</useLabel>
			</li>
			<li Class="CompProperties_UseEffect">
				<compClass>LLRoM.CompUseEffect_LearnClass</compClass>
			</li>
		</value>
	</Operation>
</Patch>